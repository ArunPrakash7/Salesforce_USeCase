public class ClaimApproval {
    public void processClaims() {
        // Retrieve all claims with a status of "Submitted"
        List<Claim__c> claims = [SELECT Id, Claim_Amount__c, Status__c, Claimant_Email__c FROM Claim__c WHERE Status__c = 'Submitted'];

        // Define the approved limit
        Decimal approvedLimit = 10000;

        // Get the Manager's User Id dynamically
        User manager = [SELECT Id FROM User WHERE Name = 'John Walker' LIMIT 1];

        // Loop through each claim
        for (Claim__c claim : claims) {
            if (claim.Claim_Amount__c <= approvedLimit) {
                // Approve the claim
                claim.Status__c = 'Approved';
                // Send an email notification to the claimant
                sendApprovalEmail(claim.Claimant_Email__c);
            } else {
                // Mark the claim as "Requires Manual Review"
                claim.Status__c = 'Requires Manual Review';
                // Assign the claim to the manager
                claim.OwnerId = manager.Id;
            }
        }

        // Update the claims
        update claims;
    }

    private void sendApprovalEmail(String emailAddress) {
        // Construct the email
        Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();
        mail.setToAddresses(new String[] {emailAddress});
        mail.setSubject('Your Claim has been Approved');
        mail.setPlainTextBody('Dear Claimant, your claim has been approved. Thank you for your patience.');

        // Send the email
        Messaging.sendEmail(new Messaging.SingleEmailMessage[] { mail });
    }
}